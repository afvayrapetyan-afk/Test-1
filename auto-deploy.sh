#!/bin/bash

clear
echo "════════════════════════════════════════════════════════════════"
echo "🚀 АВТОМАТИЧЕСКОЕ СОЗДАНИЕ ПОСТОЯННОЙ ССЫЛКИ"
echo "════════════════════════════════════════════════════════════════"
echo ""
echo "Я автоматически открою 3 страницы по очереди."
echo "На каждой странице просто следуйте инструкциям."
echo ""
read -p "Нажмите Enter чтобы начать..."

# ============================================================================
# ШАГ 1: Добавление SSH ключа на GitHub
# ============================================================================
clear
echo "════════════════════════════════════════════════════════════════"
echo "📋 ШАГ 1 из 3: Добавление SSH ключа на GitHub"
echo "════════════════════════════════════════════════════════════════"
echo ""
echo "✅ SSH ключ УЖЕ скопирован в буфер обмена!"
echo ""
echo "Сейчас откроется страница GitHub для добавления SSH ключа."
echo ""
echo "НА СТРАНИЦЕ СДЕЛАЙТЕ:"
echo "  1. Title: AI Portfolio"
echo "  2. Key: нажмите Cmd+V (вставить ключ)"
echo "  3. Нажмите зелёную кнопку 'Add SSH key'"
echo ""
read -p "Нажмите Enter чтобы открыть страницу..."

open "https://github.com/settings/ssh/new"

echo ""
echo "⏳ Жду пока вы добавите SSH ключ..."
read -p "Нажмите Enter когда добавите ключ..."

# ============================================================================
# ШАГ 2: Создание GitHub репозитория
# ============================================================================
clear
echo "════════════════════════════════════════════════════════════════"
echo "📋 ШАГ 2 из 3: Создание GitHub репозитория"
echo "════════════════════════════════════════════════════════════════"
echo ""
echo "Сейчас откроется страница для создания репозитория."
echo ""
echo "НА СТРАНИЦЕ СДЕЛАЙТЕ:"
echo "  1. Repository name: ai-business-portfolio-manager"
echo "  2. Description: AI Business Portfolio Manager (опционально)"
echo "  3. Выберите: ● Public"
echo "  4. НЕ ставьте галочки (README, .gitignore, license)"
echo "  5. Нажмите зелёную кнопку 'Create repository'"
echo ""
read -p "Нажмите Enter чтобы открыть страницу..."

open "https://github.com/new"

echo ""
echo "⏳ Жду пока вы создадите репозиторий..."
read -p "Нажмите Enter когда создадите репозиторий..."

# Запрашиваем username
echo ""
read -p "Введите ваш GitHub username (из URL): " github_user

if [ -z "$github_user" ]; then
    echo "❌ Username не может быть пустым!"
    exit 1
fi

# ============================================================================
# ШАГ 3: Отправка кода на GitHub
# ============================================================================
clear
echo "════════════════════════════════════════════════════════════════"
echo "📋 ШАГ 3 из 3: Отправка кода и деплой"
echo "════════════════════════════════════════════════════════════════"
echo ""
echo "⚙️  Настраиваю Git remote..."

cd "/Users/vardanajrapetan/Project 1"
git remote remove origin 2>/dev/null
git remote add origin "git@github.com:$github_user/ai-business-portfolio-manager.git"

echo "⚙️  Отправляю код на GitHub..."
git push -u origin main

if [ $? -ne 0 ]; then
    echo ""
    echo "❌ Ошибка при отправке кода!"
    echo ""
    echo "Возможные причины:"
    echo "  - SSH ключ не добавлен на GitHub"
    echo "  - Неверный username"
    echo ""
    echo "Попробуйте добавить SSH ключ снова:"
    echo "  open https://github.com/settings/ssh/new"
    echo ""
    exit 1
fi

echo ""
echo "✅ Код успешно отправлен на GitHub!"
echo ""

# ============================================================================
# ФИНАЛЬНЫЙ ШАГ: Деплой на Vercel
# ============================================================================
echo "════════════════════════════════════════════════════════════════"
echo "🎉 ПОЧТИ ГОТОВО! Последний шаг - деплой на Vercel"
echo "════════════════════════════════════════════════════════════════"
echo ""
echo "Сейчас откроется страница Vercel."
echo ""
echo "НА СТРАНИЦЕ СДЕЛАЙТЕ:"
echo "  1. Нажмите 'Continue with GitHub'"
echo "  2. Авторизуйте Vercel (если ещё не авторизованы)"
echo "  3. Найдите репозиторий: ai-business-portfolio-manager"
echo "  4. Нажмите 'Import' напротив него"
echo "  5. Vercel автоматически определит настройки"
echo "  6. Нажмите 'Deploy'"
echo ""
echo "Через 2-3 минуты получите постоянную ссылку!"
echo ""
read -p "Нажмите Enter чтобы открыть Vercel..."

open "https://vercel.com/new"

echo ""
echo "════════════════════════════════════════════════════════════════"
echo "✅ ГОТОВО!"
echo "════════════════════════════════════════════════════════════════"
echo ""
echo "После деплоя вы получите постоянную ссылку вида:"
echo "🔗 https://ai-business-portfolio-manager.vercel.app"
echo ""
echo "Эта ссылка будет работать ВСЕГДА (24/7)!"
echo ""
echo "📱 Тестовые данные:"
echo "   Пользователь: vardana@example.com / demo123"
echo "   Админ: Админ / 987654"
echo ""
echo "════════════════════════════════════════════════════════════════"
